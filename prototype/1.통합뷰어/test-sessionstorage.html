<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sessionStorage í†µí•© í…ŒìŠ¤íŠ¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
    </style>
</head>
<body class="p-8">
    <div class="max-w-4xl mx-auto">
        <div class="bg-white rounded-3xl shadow-2xl p-8 mb-6">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">ğŸ“š sessionStorage í†µí•© í…ŒìŠ¤íŠ¸</h1>
            <p class="text-gray-600 mb-6">ìš°ë¦¬ ë·°ì–´ì™€ .proto1.1 ì‹œìŠ¤í…œì˜ sessionStorage ì—°ë™ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>

            <!-- í˜„ì¬ sessionStorage ìƒíƒœ -->
            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 mb-6">
                <h2 class="text-lg font-bold text-gray-800 mb-3">ğŸ” í˜„ì¬ sessionStorage ìƒíƒœ</h2>
                <div class="bg-white rounded-xl p-4 font-mono text-sm" id="storage-display">
                    <pre class="whitespace-pre-wrap text-gray-600">sessionStorageê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.</pre>
                </div>
                <button onclick="refreshDisplay()" class="mt-3 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition">
                    ğŸ”„ ìƒˆë¡œê³ ì¹¨
                </button>
            </div>

            <!-- í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ -->
            <div class="grid md:grid-cols-2 gap-4 mb-6">
                <!-- ì‹œë‚˜ë¦¬ì˜¤ 1: ì •ê·œ ì½ê¸° -->
                <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border-2 border-green-200">
                    <h3 class="text-xl font-bold text-gray-800 mb-3">âœ… ì‹œë‚˜ë¦¬ì˜¤ 1: ì •ê·œ ì½ê¸°</h3>
                    <p class="text-sm text-gray-600 mb-4">ìµœì´ˆë¡œ ì±…ì„ ì½ëŠ” ê²½ìš° (completed ìƒíƒœ ì—…ë°ì´íŠ¸)</p>
                    <button onclick="setupNormalReading()" class="w-full py-3 bg-green-500 text-white rounded-xl font-bold hover:bg-green-600 transition">
                        ğŸš€ ì •ê·œ ì½ê¸° ì‹œì‘
                    </button>
                </div>

                <!-- ì‹œë‚˜ë¦¬ì˜¤ 2: ë‹¤ì‹œ ì½ê¸° -->
                <div class="bg-gradient-to-br from-amber-50 to-orange-50 rounded-2xl p-6 border-2 border-amber-200">
                    <h3 class="text-xl font-bold text-gray-800 mb-3">ğŸ”„ ì‹œë‚˜ë¦¬ì˜¤ 2: ë‹¤ì‹œ ì½ê¸°</h3>
                    <p class="text-sm text-gray-600 mb-4">ì´ë¯¸ ì½ì€ ì±…ì„ ë‹¤ì‹œ ì½ëŠ” ê²½ìš° (ì„ì‹œ ì €ì¥ë§Œ)</p>
                    <button onclick="setupReReading()" class="w-full py-3 bg-amber-500 text-white rounded-xl font-bold hover:bg-amber-600 transition">
                        ğŸ” ë‹¤ì‹œ ì½ê¸° ì‹œì‘
                    </button>
                </div>

                <!-- ì‹œë‚˜ë¦¬ì˜¤ 3: ì¤‘ê°„ë¶€í„° ì´ì–´ì½ê¸° -->
                <div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 border-2 border-purple-200">
                    <h3 class="text-xl font-bold text-gray-800 mb-3">â© ì‹œë‚˜ë¦¬ì˜¤ 3: ì´ì–´ì½ê¸°</h3>
                    <p class="text-sm text-gray-600 mb-4">ì €ì¥ëœ í˜ì´ì§€(10í˜ì´ì§€)ë¶€í„° ì‹œì‘</p>
                    <button onclick="setupContinueReading()" class="w-full py-3 bg-purple-500 text-white rounded-xl font-bold hover:bg-purple-600 transition">
                        ğŸ“– ì´ì–´ì½ê¸° ì‹œì‘
                    </button>
                </div>

                <!-- ì‹œë‚˜ë¦¬ì˜¤ 4: ì™„ë… ìƒíƒœë¡œ ì‹œì‘ -->
                <div class="bg-gradient-to-br from-rose-50 to-red-50 rounded-2xl p-6 border-2 border-rose-200">
                    <h3 class="text-xl font-bold text-gray-800 mb-3">ğŸ† ì‹œë‚˜ë¦¬ì˜¤ 4: ì´ë¯¸ ì™„ë…</h3>
                    <p class="text-sm text-gray-600 mb-4">ì™„ë… ìƒíƒœì—ì„œ ë‹¤ì‹œ ë³´ê¸°</p>
                    <button onclick="setupCompletedBook()" class="w-full py-3 bg-rose-500 text-white rounded-xl font-bold hover:bg-rose-600 transition">
                        ğŸ‰ ì™„ë… ìƒíƒœë¡œ ì—´ê¸°
                    </button>
                </div>
            </div>

            <!-- ì´ˆê¸°í™” ë²„íŠ¼ -->
            <div class="flex gap-3">
                <button onclick="clearStorage()" class="flex-1 py-3 bg-gray-500 text-white rounded-xl font-bold hover:bg-gray-600 transition">
                    ğŸ—‘ï¸ sessionStorage ì´ˆê¸°í™”
                </button>
                <button onclick="openViewer()" class="flex-1 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl font-bold hover:from-indigo-600 hover:to-purple-600 transition">
                    ğŸ“± ë·°ì–´ ì—´ê¸°
                </button>
            </div>
        </div>

        <!-- í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ -->
        <div class="bg-white/90 rounded-2xl p-6">
            <h3 class="text-lg font-bold text-gray-800 mb-3">ğŸ“‹ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ</h3>
            <ol class="space-y-2 text-sm text-gray-700">
                <li><strong>1ë‹¨ê³„:</strong> ìœ„ì—ì„œ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</li>
                <li><strong>2ë‹¨ê³„:</strong> "ë·°ì–´ ì—´ê¸°" ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.</li>
                <li><strong>3ë‹¨ê³„:</strong> ë·°ì–´ì—ì„œ í˜ì´ì§€ë¥¼ ë„˜ê¸°ë©° ì§„í–‰ë¥ ì´ ì €ì¥ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. (ì½˜ì†” ë¡œê·¸ í™•ì¸)</li>
                <li><strong>4ë‹¨ê³„:</strong> ë§ˆì§€ë§‰ í˜ì´ì§€ê¹Œì§€ ì½ì–´ì„œ ì™„ë… ëª¨ë‹¬ì´ ë‚˜íƒ€ë‚˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</li>
                <li><strong>5ë‹¨ê³„:</strong> ì™„ë… í›„ quiz.html ë˜ëŠ” home.htmlë¡œ ì´ë™í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</li>
            </ol>
            <div class="mt-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded">
                <p class="text-sm text-yellow-800">
                    <strong>ğŸ’¡ íŒ:</strong> ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬(F12) â†’ Application íƒ­ â†’ Session Storageì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°ì´í„° ë³€í™”ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </p>
            </div>
        </div>
    </div>

    <script>
        // sessionStorage í‘œì‹œ ìƒˆë¡œê³ ì¹¨
        function refreshDisplay() {
            const display = document.getElementById('storage-display');
            const currentBook = sessionStorage.getItem('currentBook');
            const isReReading = sessionStorage.getItem('isReReadingMode');

            let html = '<div class="space-y-3">';

            if (currentBook) {
                const book = JSON.parse(currentBook);
                html += '<div class="mb-3">';
                html += '<div class="text-xs text-gray-500 mb-1">currentBook:</div>';
                html += '<pre class="text-xs text-gray-800">' + JSON.stringify(book, null, 2) + '</pre>';
                html += '</div>';
            }

            if (isReReading) {
                html += '<div class="mb-3">';
                html += '<div class="text-xs text-gray-500 mb-1">isReReadingMode:</div>';
                html += '<pre class="text-xs text-gray-800">' + isReReading + '</pre>';
                html += '</div>';
            }

            // rereadProgress í‚¤ë“¤ ì°¾ê¸°
            for (let i = 0; i < sessionStorage.length; i++) {
                const key = sessionStorage.key(i);
                if (key.startsWith('rereadProgress_')) {
                    const value = sessionStorage.getItem(key);
                    html += '<div class="mb-3">';
                    html += '<div class="text-xs text-gray-500 mb-1">' + key + ':</div>';
                    html += '<pre class="text-xs text-gray-800">' + value + '</pre>';
                    html += '</div>';
                }
            }

            if (!currentBook && !isReReading) {
                html = '<pre class="whitespace-pre-wrap text-gray-600">sessionStorageê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.</pre>';
            } else {
                html += '</div>';
            }

            display.innerHTML = html;
        }

        // ì‹œë‚˜ë¦¬ì˜¤ 1: ì •ê·œ ì½ê¸°
        function setupNormalReading() {
            const bookData = {
                title: "ì˜¤ì¦ˆì˜ ë§ˆë²•ì‚¬",
                currentBookPage: 1,
                totalPages: 16,
                completed: false,
                isReReading: false,
                week: 1,
                bookType: "core",
                startPage: 1
            };
            sessionStorage.setItem('currentBook', JSON.stringify(bookData));
            sessionStorage.removeItem('isReReadingMode');

            alert('âœ… ì •ê·œ ì½ê¸° ëª¨ë“œ ì„¤ì • ì™„ë£Œ!\n\nì´ì œ "ë·°ì–´ ì—´ê¸°"ë¥¼ í´ë¦­í•˜ì„¸ìš”.');
            refreshDisplay();
        }

        // ì‹œë‚˜ë¦¬ì˜¤ 2: ë‹¤ì‹œ ì½ê¸°
        function setupReReading() {
            const bookData = {
                title: "ì˜¤ì¦ˆì˜ ë§ˆë²•ì‚¬",
                currentBookPage: 1,
                totalPages: 16,
                completed: true,  // ì´ë¯¸ ì™„ë…í•œ ìƒíƒœ
                isReReading: true,
                week: 1,
                bookType: "core",
                startPage: 1
            };
            sessionStorage.setItem('currentBook', JSON.stringify(bookData));
            sessionStorage.setItem('isReReadingMode', 'true');

            alert('ğŸ”„ ë‹¤ì‹œ ì½ê¸° ëª¨ë“œ ì„¤ì • ì™„ë£Œ!\n\nì™„ë…í•´ë„ ì§„í–‰ë¥ ì€ ì„ì‹œ ì €ì¥ë§Œ ë©ë‹ˆë‹¤.');
            refreshDisplay();
        }

        // ì‹œë‚˜ë¦¬ì˜¤ 3: ì´ì–´ì½ê¸°
        function setupContinueReading() {
            const bookData = {
                title: "ì˜¤ì¦ˆì˜ ë§ˆë²•ì‚¬",
                currentBookPage: 10,  // 10í˜ì´ì§€ë¶€í„° ì‹œì‘
                totalPages: 16,
                completed: false,
                isReReading: false,
                week: 1,
                bookType: "core",
                startPage: 1
            };
            sessionStorage.setItem('currentBook', JSON.stringify(bookData));
            sessionStorage.removeItem('isReReadingMode');

            alert('â© ì´ì–´ì½ê¸° ëª¨ë“œ ì„¤ì • ì™„ë£Œ!\n\n10í˜ì´ì§€ë¶€í„° ì‹œì‘ë©ë‹ˆë‹¤.');
            refreshDisplay();
        }

        // ì‹œë‚˜ë¦¬ì˜¤ 4: ì´ë¯¸ ì™„ë…
        function setupCompletedBook() {
            const bookData = {
                title: "ì˜¤ì¦ˆì˜ ë§ˆë²•ì‚¬",
                currentBookPage: 16,
                totalPages: 16,
                completed: true,
                completedAt: new Date().toISOString(),
                isReReading: false,
                week: 1,
                bookType: "core",
                startPage: 1
            };
            sessionStorage.setItem('currentBook', JSON.stringify(bookData));
            sessionStorage.removeItem('isReReadingMode');

            alert('ğŸ† ì™„ë… ìƒíƒœë¡œ ì„¤ì • ì™„ë£Œ!\n\në§ˆì§€ë§‰ í˜ì´ì§€ë¶€í„° ì‹œì‘ë©ë‹ˆë‹¤.');
            refreshDisplay();
        }

        // sessionStorage ì´ˆê¸°í™”
        function clearStorage() {
            if (confirm('sessionStorageë¥¼ ëª¨ë‘ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                sessionStorage.clear();
                alert('ğŸ—‘ï¸ ì´ˆê¸°í™” ì™„ë£Œ!');
                refreshDisplay();
            }
        }

        // ë·°ì–´ ì—´ê¸°
        function openViewer() {
            const currentBook = sessionStorage.getItem('currentBook');
            if (!currentBook) {
                alert('âš ï¸ ë¨¼ì € í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }

            // ìƒˆ íƒ­ì—ì„œ ë·°ì–´ ì—´ê¸°
            window.open('ë¶í´ëŸ½3.0_ë…ì„œë·°ì–´_v0.3.html', '_blank');
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ í‘œì‹œ ìƒˆë¡œê³ ì¹¨
        window.addEventListener('load', refreshDisplay);

        // ë‹¤ë¥¸ íƒ­ì—ì„œ sessionStorageê°€ ë³€ê²½ë  ë•Œ ìë™ ìƒˆë¡œê³ ì¹¨
        window.addEventListener('storage', refreshDisplay);
    </script>
</body>
</html>
